# 誤り同定する画像処理
## 二値化
- 局所的二値化という手法を用いる
`cv2.adaptiveThreshold()`というOpenCV関数を用いる。
- 特に手書きのデッサン画像のような、明るさや線の濃淡が均一でない画像に適した処理に適している
 - 各引数の詳細：
   - `image_np`: 入力画像。グレースケールであること
   - `255`: `cv2.THRESH_BINARY` の場合に、閾値を超えたピクセルに割り当てる最大値（白）。**この値は基本変えない**
   - `adaptiveMethod`: 適応的閾値計算の方法
     - `ADAPTIVE_THRESH_GAUSSIAN_C` は、各ピクセルの閾値を、そのピクセルを中心とする近傍領域内の値の「ガウス加重平均」に基づいて計算します。これにより、ノイズに強く、より自然な結果が得られる傾向があります。
     - `cv2.ADAPTIVE_THRESH_MEAN_C` は単純な算術平均を使用しますが、多くの場合 `GAUSSIAN_C` の方がより高品質な結果をもたらします。
   - `thresholdType`: 閾値処理の種類を指定します。
     - `cv2.THRESH_BINARY` は、ピクセル値が計算された閾値を超えた場合は `maxValue` (この場合は255) に設定し、そうでなければ0（黒）に設定します。`cv2.THRESH_BINARY_INV`はその逆。
   - `奇数`: `blockSize`。閾値計算に使用する近傍領域のサイズ。**この値は奇数である必要があります。**
     - 例えば `11` を指定すると、11x11ピクセルのブロックで閾値が計算されます。`
   - `定数`: `C`。計算された平均（または加重平均）から引かれる定数です。
     - この値を調整することで、閾値の厳しさ（感度）を制御できます。正の値を設定すると閾値が厳しくなり、暗い部分のノイズを除去しやすくなります。
- 結果として、`binary` 変数には二値化された画像が NumPy 配列として格納されます（白黒の画像、各ピクセルは0または255）。

## ノイズ除去
- グレースケール画像に含まれるギザギザを除去し**平滑化**する。
- 二値化の前に
### 平滑化(smoothing)
- 濃淡変動を軽減する
- 局所的二値化は画像のノイズ（「ごま塩ノイズ」と呼ばれるような、孤立した白い点や黒い点）を拾いやすい性質があるため、必要
- 方法として、メディアンフィルタ/モルフォロジー変換があるが、メディアンフィルタで事足りるはず


## 輪郭検出
 - `cv2.findContours`を利用
 - 引数
   - `binary`:
   - `contour retrieval mode`
     - `cv2.RETR_EXTERNAL`: 最も外側の輪郭のみを検出します。これにより、楕円の外側の輪郭だけを取得しやすくなります。
   - `cv2.CHAIN_APPROX_SIMPLE`: 輪郭の頂点を圧縮し、メモリ効率を高めます。